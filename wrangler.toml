name = "blotter-management-api"
type = "javascript"
compatibility_date = "2023-10-01"
main = "dist/index.js"

# Environment variables for production
[env.production]
name = "blotter-management-api-prod"
route = "api.yourdomain.com/*"
zone_id = "your-zone-id"

[env.production.vars]
JWT_SECRET = "your-production-jwt-secret-key"
DATABASE_URL = "your-cloudbase-database-url"
ALLOWED_ORIGINS = "https://yourdomain.com,https://app.yourdomain.com"
NODE_ENV = "production"

# Environment variables for staging
[env.staging]
name = "blotter-management-api-staging"
route = "api-staging.yourdomain.com/*"

[env.staging.vars]
JWT_SECRET = "your-staging-jwt-secret-key"
DATABASE_URL = "your-staging-database-url"
ALLOWED_ORIGINS = "https://staging.yourdomain.com"
NODE_ENV = "staging"

# Triggers for scheduled tasks
[[triggers.crons]]
cron = "0 0 * * *"  # Daily at midnight

# Build configuration
[build]
command = "bun run build"
cwd = "./"
